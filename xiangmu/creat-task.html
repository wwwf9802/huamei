<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>创建任务</title>
		<!-- Mobile Devices Support @begin -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" />
		<meta content="yes" name="apple-mobile-web-app-capable">
		<meta content="yes" name="apple-touch-fullscreen">
		<meta content="telephone=no,email=no" name="format-detection">
		<script src="../js/flexible.js" type="text/javascript"></script>
		<script src="../js/flexible_css.js" type="text/javascript"></script>
		<!-- Mobile Devices Support @end -->
		<link rel="stylesheet" href="../css/base-reset.css">
		<link rel="stylesheet" href="../css/mui.min.css">
		<link rel="stylesheet" href="../css/mui.picker.all.css" />
		<link rel="stylesheet" type="text/css" href="../css/swiper-3.3.1.min.css">
		<link rel="stylesheet" type="text/css" href="../css/common.css">
		<link rel="stylesheet" type="text/css" href="../css/yhn.css">
	</head>
	<style>
		.mui-navigate-right {
			font-size: .4rem
		}
		
		.mui-navigate-right>span {
			margin-right: .5rem;
			font-size: .4rem;
			color: #aaa
		}
		
		.mui-navigate-right>.active {
			color: #333
		}
		.mui-btn-blue{background-color:#EB6D00 !important;border:1px solid #EB6D00 !important}
	</style>

	<body>
		<header class="mui-bar mui-bar-nav header">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<span class="title">创建任务</span>
		</header>
		<section class="under-top">
			<ul class="mui-table-view">
				<li class="mui-table-view-cell">
					<a data-arr="arr1" class="a-choice mui-navigate-right">
						任务类型
						<span class="right">点击选择</span>
					</a>
				</li>
				<li class="mui-table-view-cell">
					<a data-arr="arr2" class="a-choice mui-navigate-right">
						所属节点
						<span class="right">点击选择</span>
					</a>
				</li>
				<li class="mui-table-view-cell">
					<a data-arr="arr2" class="a-choice mui-navigate-right">
						任务说明
						<span class="right">点击选择</span>
					</a>
				</li>
				<li class="mui-table-view-cell">
					<a data-arr="arr2" class="a-choice mui-navigate-right">
						接收人
						<span class="right">点击选择</span>
					</a>
				</li>
				<li class="mui-table-view-cell">
					<a id="datapicBtn" data-options='{"type":"date"}' class="mui-navigate-right">
						完成时间
						<span class="right">点击选择</span>
					</a>
				</li>
			</ul>
		</section>
	</body>
	<script src="../js/zepto1.1.6.min.js"></script>
	<script src="../js/mui.min.js"></script>
	<script src="../js/picker/mui.picker.min.js"></script>
	<script src="../js/picker/mui.poppicker.js"></script>
	<script src="../js/vue.min.js"></script>
	<script>
		var arr = [];
		var vm = new Vue({
			el: '#goodsList',
			data: {
				arr1: [{
					valu: 'ywj',
					text: '董事长 叶文洁'
				}, {
					valu: 'aaa',
					text: '总经理 艾AA'
				}, {
					valu: 'lj',
					text: '罗辑'
				}, {
					valu: 'ymt',
					text: '云天明'
				}, {
					valu: 'shq',
					text: '史强'
				}, {
					valu: 'zhbh',
					text: '章北海'
				}, {
					valu: 'zhy',
					text: '庄颜'
				}, {
					valu: 'gyf',
					text: '关一帆'
				}, {
					valu: 'zhz',
					text: '智子'
				}, {
					valu: 'gezh',
					text: '歌者'
				}],
				arr2: [{
					valu: 'ywj',
					text: '董事长 2叶文洁'
				}, {
					valu: 'aaa',
					text: '总经理 2艾AA'
				}, {
					valu: 'lj',
					text: '2罗辑'
				}, {
					valu: 'ymt',
					text: '2云天明'
				}, {
					valu: 'shq',
					text: '2史强'
				}, {
					valu: 'zhbh',
					text: '2章北海'
				}, {
					valu: 'zhy',
					text: '2庄颜'
				}, {
					valu: 'gyf',
					text: '2关一帆'
				}, {
					valu: 'zhz',
					text: '2智子'
				}, {
					valu: 'gezh',
					text: '2歌者'
				}],
			},
			methods: {
				changeArr: function(e) {}
			},
			ready: function() {
				getCarMessage();
			}
		});

		(function($, doc, Zepto) {
			$.init();
			$.ready(function() {
				var userPicker = new $.PopPicker();
				userPicker.setData(arr);
				var showUserPickerButton = null;
				Zepto(".a-choice").on("tap", function() {
					var that = this;
					var index = Zepto(this).data("arr");
					var arr = vm[index];
					userPicker.setData(arr);
					userPicker.show(function(items) {
						Zepto(that).find("span").addClass("active").html(items[0].text);
						//返回 false 可以阻止选择框的关闭
						//return false;
					});
				});
			});

			datapicBtn.addEventListener('tap', function() {
				var that=this
				var optionsJson = this.getAttribute('data-options') || '{}';
				var options = JSON.parse(optionsJson);
				var id = this.getAttribute('id');
				/*
				 * 首次显示时实例化组件
				 * 示例为了简洁，将 options 放在了按钮的 dom 上
				 * 也可以直接通过代码声明 optinos 用于实例化 DtPicker
				 */
				var picker = new $.DtPicker(options);
				picker.show(function(rs) {
					/*
					 * rs.value 拼合后的 value
					 * rs.text 拼合后的 text
					 * rs.y 年，可以通过 rs.y.vaue 和 rs.y.text 获取值和文本
					 * rs.m 月，用法同年
					 * rs.d 日，用法同年
					 * rs.h 时，用法同年
					 * rs.i 分（minutes 的第二个字母），用法同年
					 */
					Zepto(that).find("span").addClass("active").html(rs.text);
					//result.innerText = '选择结果: ' + rs.text;
					/* 
					 * 返回 false 可以阻止选择框的关闭
					 * return false;
					 */
					/*
					 * 释放组件资源，释放后将将不能再操作组件
					 * 通常情况下，不需要示放组件，new DtPicker(options) 后，可以一直使用。
					 * 当前示例，因为内容较多，如不进行资原释放，在某些设备上会较慢。
					 * 所以每次用完便立即调用 dispose 进行释放，下次用时再创建新实例。
					 */
					//picker.dispose();
				});
			}, false);
		})(mui, document, Zepto);
	</script>

</html>