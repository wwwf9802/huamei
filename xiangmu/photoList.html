<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="UTF-8">
		<title>任务明细</title>
		<!-- Mobile Devices Support @begin -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" />
		<!-- Mobile Devices Support @end -->
		<link rel="stylesheet" href="../css/base-reset.css">
		<link rel="stylesheet" href="../css/mui.min.css">
		<link rel="stylesheet" type="text/css" href="../css/swiper-3.3.1.min.css">
		<link rel="stylesheet" type="text/css" href="../css/common.css">
		<link rel="stylesheet" type="text/css" href="../css/lzr.css">
		<link rel="stylesheet" href="../css/ww.css" />
	</head>

	<body class="photoList">
		<div class="mui-bar mui-bar-nav header project-list-head">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			平面布置图
			<span id="initSelect" data-status = '0' class="header-right">选择</span>
		</div>
		<div class="loading" style="display: none;">
			<span class="mui-spinner"></span>	
		</div>
		<div id="photoList" class="g-content g-content-daichuli g-renwu-mingxi">
			<div class="item">
				<div>
					<input type="file" id="uploadphoto" name="uploadfile" accept="image/*" style="display: none;" />
					<div v-for="item in imgDataArr" class="photo-div" v-bind:class = "{active:!item.selected,flag:!item.flag}">
						<img src="{{item.url}}" class="uploadPic" />
						<div class="picShadow"></div>
						<i class="close" v-on:click="selectPic(item)" ></i>
					</div>
					<div style="clear: both;"></div>
				</div>
			</div>
		</div>
		<div id="submitBtn">删除</div>
	</body>
	<style>
	    
	</style>
	<script src="../js/flexible.js" type="text/javascript"></script>
	<script src="../js/flexible_css.js" type="text/javascript"></script>
	<script src='../js/swiper-3.3.1.min.js' type="text/javascript"></script>
	<script src='../js/mui.min.js'></script>
	<script src='../js/vue.min.js'></script>
	<script type="text/javascript" src="../js/zepto1.1.6.min.js" ></script>
	<script src="../upload/LocalResizeIMG.js"></script>
	<script src="../upload/mobileBUGFix.mini.js"></script>
	<script>
		var photoList = new Vue({
			el: '#photoList',
			data: {
				imgDataArr: [{url:'../images/logo.png',selected:false,flag:false},{url:'../images/logo.png',selected:false,flag:false}
				,{url:'../images/logo.png',selected:false,flag:false},{url:'../images/logo.png',selected:false,flag:false}
				,{url:'../images/logo.png',selected:false,flag:false},{url:'../images/logo.png',selected:false,flag:false}
				,{url:'../images/logo.png',selected:false,flag:false},{url:'../images/logo.png',selected:false,flag:false}
				,{url:'../images/logo.png',selected:false,flag:false},{url:'../images/logo.png',selected:false,flag:false}
				,{url:'../images/logo.png',selected:false,flag:false},{url:'../images/logo.png',selected:false,flag:false}
				,{url:'../images/logo.png',selected:false,flag:false},{url:'../images/logo.png',selected:false,flag:false}
				,{url:'../images/logo.png',selected:false,flag:false},{url:'../images/logo.png',selected:false,flag:false}
				,{url:'../images/logo.png',selected:false,flag:false},{url:'../images/logo.png',selected:false,flag:false}
				,{url:'../images/logo.png',selected:false,flag:false},{url:'../images/logo.png',selected:false,flag:false}]
			},
			methods:{
				selectPic : function(item){
					item.selected = !item.selected;
					calNum();
				}
			}
		});
		$("#initSelect").on('tap',function(){
			if($(this).data('status') == '0'){
				$(this).data('status','1');
				$(this).text('取消');
				startSelectPic();
			}else{
				$(this).data('status','0');
				$(this).text('选择');
				endSelectPic();
			}
		});
		var startSelectPic = function(){
			for (var i = 0; i < photoList.imgDataArr.length; i++) {
				photoList.imgDataArr[i].flag = true;
				photoList.imgDataArr[i].selected = false;
			}
		}
		var endSelectPic = function(){
			for (var i = 0; i < photoList.imgDataArr.length; i++) {
				photoList.imgDataArr[i].flag = false;
				photoList.imgDataArr[i].selected = false;
			}
		}
		var calNum = function(){
			var num = 0;
			for (var i = 0; i < photoList.imgDataArr.length; i++) {
				if(photoList.imgDataArr[i].selected){
					num ++;
				}
			}
			if(num == 0){
				$("#submitBtn").text("删除");
			}else{
				$("#submitBtn").text("删除("+num+")");
			}
			
		}
		$("#submitBtn").on('tap',function(){
			for (var i = 0; i < photoList.imgDataArr.length; i++) {
				if(photoList.imgDataArr[i].selected){
					console.log(i);
				}
			}
		});
		 
	</script>

</html>