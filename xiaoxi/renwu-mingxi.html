  <!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>任务明细</title>
	<!-- Mobile Devices Support @begin -->
    <meta http-equiv = "X-UA-Compatible" content = "IE=edge,chrome=1" / >
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" />
    <meta content="yes" name="apple-mobile-web-app-capable">
	<meta content="yes" name="apple-touch-fullscreen">
	<meta content="telephone=no,email=no" name="format-detection">
    <!-- Mobile Devices Support @end -->
    <script src="../js/flexible.js" type="text/javascript"></script>
    <script src="../js/flexible_css.js" type="text/javascript"></script>
    <link rel="stylesheet" href="../css/base-reset.css">
    <link rel="stylesheet" href="../css/mui.min.css">
    <link rel="stylesheet" type="text/css" href="../css/swiper-3.3.1.min.css">
    <link href="../js/picker/mui.picker.min.css" rel="stylesheet" />
	<link href="../js/picker/mui.poppicker.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="../css/common.css">
    <link rel="stylesheet" type="text/css" href="../css/lzr.css">
</head>
<body>
    <div class="mui-bar mui-bar-nav header project-list-head">
        <a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
        任务明细
    </div>

    <div class="g-content g-content-daichuli g-renwu-mingxi">
    	 <div class="user-info">
    	 	   <div class="title">东莞南城区南城花园一期A栋2306</div>
    	 	   <div class="sub-title"><span>业主：</span>李晓<span>&nbsp;&nbsp;|&nbsp; </span> 15627215946</div>
    	 </div>
    	 <div class="item-paigong">
    	 	 <div class="head">
    	 	 	  3 &nbsp;&nbsp;<span>|</span>&nbsp;&nbsp; 工程派工
    	 	 </div>
    	 	 <div class="info-paigong">
    	 	 	 <div class="tr">
    	 	 	 	<div class="td th">任务名称：</div>
    	 	 	 	<div class="td">工程派工</div>
    	 	 	 </div>
    	 	 	 <div class="tr">
    	 	 	 	<div class="td th">发起人：</div>
    	 	 	 	<div class="td">系统</div>
    	 	 	 </div>
    	 	 	 <div class="tr">
    	 	 	 	<div class="td th">接收人：</div>
    	 	 	 	<div class="td">五天-装饰分部部长</div>
    	 	 	 </div>
    	 	 	 <div class="tr">
    	 	 	 	<div class="td th">任务类型：</div>
    	 	 	 	<div class="td">派工泪</div>
    	 	 	 </div>
    	 	 	 <div class="tr">
    	 	 	 	<div class="td th">接收时间：</div>
    	 	 	 	<div class="td">2017</div>
    	 	 	 </div>
    	 	 	  <div class="tr">
    	 	 	 	<div class="td th">任务状态：</div>
    	 	 	 	<div class="td">待处理</div>
    	 	 	 </div>
    	 	 </div>
    	 </div>
    	 <div class="paigong-dan">
    	 	  <div class="title">
    	 	  	   派工单
    	 	  </div>
    	 	  <div id='project_jingli' class="paigong-lists">
    	 	  	  项目经理&nbsp;&nbsp;<span class='icon-xing'> * </span>
    	 	  	  <span id='cardVal0' class='chose-value'></span>
    	 	  </div>
    	 	  <div id='gongcheng_jingli' class="paigong-lists">
    	 	  	  工程经理&nbsp;&nbsp;<span class='icon-xing'> * </span>
    	 	  	  <span id='cardVal1' class='chose-value'></span>
    	 	  </div>
    	 	   <div id='dudaoyuan' class="paigong-lists">
    	 	  	  督导员&nbsp;&nbsp;<span class='icon-xing'> * </span>
    	 	  	  <span id='cardVal2' class='chose-value'></span>
    	 	  </div>
    	 </div>
    	 <div class="paigong-dan fankui-miaoshu">
    	 	 <div class="title">
    	 	  	   反馈描述：
    	 	 </div>
    	 	 <div class="textarea">
    	 	 	 <textarea name="" @input='keyup($event)' id="textarea_info" cols="30" rows="10" placeholder="说点什么吧..."></textarea>
    	 	 	 <span v-el:numtips class='num-tips'><span class='shuru-num'>{{num}}</span>/500</span>
    	 	 </div>
    	 </div>
    	 <div class="queren-btn">
    	 	  <div id='sure_btn' class="sure-btn">确认完成</div>
    	 </div>
    </div>
	<script src="../js/zepto1.1.6.min.js" type="text/javascript"></script>
    <script src='../js/swiper-3.3.1.min.js' type="text/javascript"></script>
    <script src='../js/mui.min.js'></script>
    <script src='../js/vue.min.js'></script>
    <script type="text/javascript" src="../js/picker/mui.picker.min.js"></script>
	<script type="text/javascript" src="../js/picker/mui.poppicker.js"></script>
	<script type="text/javascript" src="../js/layer-m/layer.js" ></script>
    <script>
         var vm=new Vue({
         	el:'body',
         	data:{
               num:0,
               panduan:true
         	},
         	methods:{
                keyup:function(e){
                    var len = e.target.value.length;
                    if (len <= 500) {
		                 this.num=len;
		                 this.panduan=true;
		            } else {
		            	 tanchu("反馈描述最多限制为500字数！");
		                 this.num=500;
		                 this.panduan=false;
		            }
                }
         	}
         });

         // 创建全局变量
         var arr=[];
         var arr_length='';
         var sure_btn_c=$("#sure_btn");
         (function($) {
			$.init();

			// 项目经理
			var pro_arr = [{text:"zzz"},{text:"xxxx"},{text:"aaa"}];
			project_jingli.addEventListener('tap', function() {
				var cardPicker = new $.PopPicker({
					layer: 1
				});
				cardPicker.setData(pro_arr);
				cardPicker.show(function(items) {
					cardVal0.innerText = items[0].text;
					cardPicker.dispose();
					arr.push(cardVal0.innerText);
					arr_length=arr.length;
					if(arr_length>=3){
                        sure_btn_c.addClass("gaoliang")
					}
				});
			}, false);
            // 工程经理
			var gong_arr = [{text:"zzz"},{text:"xxxx"},{text:"aaa"}];
			gongcheng_jingli.addEventListener('tap', function() {
				var cardPicker = new $.PopPicker({
					layer: 1
				});
				cardPicker.setData(gong_arr);
				cardPicker.show(function(items) {
					cardVal1.innerText = items[0].text;;
					cardPicker.dispose();
					arr.push(cardVal1.innerText);
					arr_length=arr.length;
					if(arr_length>=3){
                        sure_btn_c.addClass("gaoliang")
					}					 
				});
			}, false);

            // 督导员
			var dudao_arr = [{text:"zzz"},{text:"xxxx"},{text:"aaa"}];
			dudaoyuan.addEventListener('tap', function() {
				var cardPicker = new $.PopPicker({
					layer: 1
				});
				cardPicker.setData(dudao_arr);
				cardPicker.show(function(items) {
					cardVal2.innerText = items[0].text;;
					cardPicker.dispose();
					arr.push(cardVal2.innerText);
					arr_length=arr.length;
					if(arr_length>=3){
                        sure_btn_c.addClass("gaoliang")
					}
				});
			}, false);
			
		})(mui);
       
        sure_btn.addEventListener("tap",function(){
             var jingli_value= cardVal0.innerText;
             var gongcheng_value= cardVal1.innerText;
             var dudao_value= cardVal2.innerText;
             if(!isBlank(jingli_value) && !isBlank(gongcheng_value) && !isBlank(dudao_value) && vm.panduan ){

             	 // 输入成功后要做的事情
             }
             else if(!vm.panduan){
             	 tanchu("反馈描述最多限制为500字数！");
             	 return false;
             }
             else{
             	 tanchu("您还有必填的信息没填，请填写完整！");
             	 return false;
             }
        },false)

		/**判断是否为空**/
        function isBlank(_value) {
            if (_value == null || _value == "" || _value == undefined) {
                return true;
            }
            return false;
        }

        //弹出框函数
		function tanchu(cont) {
			layer.open({
				btn: ['OK'],
				content: cont, //内容
				shade: [0.5, '#000'], //遮罩层  透明度，颜色
				shadeClose: true, //点击遮罩层 关闭弹出层
				time: 0 //  自动关闭时间，  0表示不自动关闭	           
			});
		}

    </script>
</body>
</html>